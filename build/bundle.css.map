{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte",
    "../../MapView.svelte"
  ],
  "sourcesContent": [
    "<script>\n    import {onMount} from 'svelte'\n    import {needsData} from './stores'\n    import MapView from './components/MapView.svelte'\n\n    onMount(() => {\n        (async () => {\n            // Load data from needs.geojson\n            const features = await (await fetch('data/needs.geojson')).json()\n            needsData.set(features)\n        })();\n    })\n</script>\n\n<main>\n    <MapView/>\n</main>\n\n<style>\n    main {\n        padding: 1em 0.5em;\n        margin: 0 auto;\n    }\n\n    @media (max-width: 768px) {\n        main {\n            padding: 1em 2em;\n        }\n    }\n</style>",
    "<script>\n    import {onMount} from 'svelte'\n    import {needsData} from '../stores'\n\n    let container;\n    let map\n\n    onMount(() => {\n        mapboxgl.accessToken = 'pk.eyJ1IjoiemhpayIsImEiOiJjaW1pbGFpdHQwMGNidnBrZzU5MjF5MTJiIn0.N-EURex2qvfEiBsm-W9j7w';\n        map = new mapboxgl.Map({\n            container,\n            style: 'mapbox://styles/zhik/cka343h1701vn1imnfp2nptkj',\n            center: [-73.8217, 40.67],\n            zoom: 10.3\n\n        });\n    })\n\n\n    $: {\n        if (map && $needsData && $needsData.features) {\n            map.on('load', () => {\n                map.addSource('needs', {'type': 'geojson', data: $needsData});\n\n                map.addLayer({\n                    'id': 'needs-streets',\n                    'type': 'line',\n                    'source': 'needs',\n                    'paint': {\n                        'line-color': '#363636',\n                        'line-opacity': 0.8,\n                        'line-width': 3\n                    },\n                    'filter': ['==', '$type', 'LineString']\n                });\n\n                map.on('click', 'needs-streets', function (e) {\n                    const feature = e.features[0]\n                    const {type, request, explanation, tracking_code} = feature.properties\n                    const district = tracking_code.slice(0, 3)\n\n                    new mapboxgl.Popup()\n                            .setLngLat(e.lngLat)\n                            .setHTML(`<h3>${request}</h3><p>${district}</p><p>${explanation}</p>`)\n                            .addTo(map);\n                });\n\n                map.on('mouseenter', 'needs-streets', function () {\n                    map.getCanvas().style.cursor = 'pointer';\n                });\n\n                map.on('mouseleave', 'needs-streets', function () {\n                    map.getCanvas().style.cursor = '';\n                });\n\n                //for each point feature add html marker\n                $needsData.features\n                        .filter(feature => feature.geometry.type === 'Point')\n                        .forEach(feature => {\n                            // create a HTML element for each feature\n                            const el = document.createElement('div');\n                            const {type, request, explanation, tracking_code} = feature.properties\n                            const district = tracking_code.slice(0, 3)\n                            el.className = `marker-${type}`;\n                            el.textContent = feature.properties.revised_priority\n\n                            // make a marker for each feature and add to the map\n                            new mapboxgl.Marker(el)\n                                    .setLngLat(feature.geometry.coordinates)\n                                    .setPopup(new mapboxgl.Popup({offset: 5})\n                                            .setHTML(`<h3>${request}</h3><p>${district}</p><p>${explanation}</p>`))\n                                    .addTo(map);\n                        })\n            });\n        }\n    }\n\n</script>\n\n<div class=\"map-view\">\n    <div id=\"map\" bind:this={container}></div>\n    <div class=\"legend\">\n        <h4>Queens DSNY Needs</h4>\n        <div class=\"legend-item\">\n            <div class=\"marker-district\">1</div>\n            <div class=\"label\">District-wide need</div>\n        </div>\n        <div class=\"legend-item\">\n            <div class=\"marker-location\">1</div>\n            <div class=\"label\">Location-specific need</div>\n        </div>\n    </div>\n</div>\n\n<style>\n    .map-view{\n        position: relative;\n    }\n\n    #map {\n        width: 100%;\n        height: 700px;\n    }\n\n    .legend{\n        line-height: 18px;\n        color: #555;\n        position: absolute;\n        top: 10px;\n        right: 20px;\n        z-index: 2;\n        background-color: rgba(255, 255, 255, 0.7);\n        padding: 5px 10px;\n    }\n\n    .legend h4{\n        margin: 5px 0px;\n    }\n\n    .legend-item {\n        margin-right: 1rem;\n        display: flex;\n        flex-direction: row;\n    }\n\n    .label {\n        margin-left: 1rem;\n    }\n\n    :global(.marker-district) {\n        text-align: center;\n        background-color: #363636;\n        color: white;\n        font-weight: 800;\n        line-height: 16.2px;\n        height: 16px;\n        width: 16px;\n        font-size: 10px;\n        border-radius: 50%;\n        cursor: pointer;\n    }\n\n    :global(.marker-location) {\n        text-align: center;\n        background-color: #363636;\n        color: white;\n        font-weight: 800;\n        line-height: 16.2px;\n        height: 16px;\n        width: 16px;\n        font-size: 10px;\n        cursor: pointer;\n    }\n\n    :global(.mapboxgl-popup) {\n        max-width: 300px;\n    }\n\n    :global(.mapboxgl-popup-content) {\n        font-family: 'Open Sans', sans-serif;\n        max-height: 300px;\n        overflow-y: auto;\n        padding: 5px 10px !important;\n    }\n\n</style>"
  ],
  "names": [],
  "mappings": "AAmBI,IAAI,eAAC,CAAC,AACF,OAAO,CAAE,GAAG,CAAC,KAAK,CAClB,MAAM,CAAE,CAAC,CAAC,IAAI,AAClB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACvB,IAAI,eAAC,CAAC,AACF,OAAO,CAAE,GAAG,CAAC,GAAG,AACpB,CAAC,AACL,CAAC;ACmED,qCAAS,CAAC,AACN,QAAQ,CAAE,QAAQ,AACtB,CAAC,AAED,IAAI,4BAAC,CAAC,AACF,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,KAAK,AACjB,CAAC,AAED,mCAAO,CAAC,AACJ,WAAW,CAAE,IAAI,CACjB,KAAK,CAAE,IAAI,CACX,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CACT,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,CAAC,CACV,gBAAgB,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAC1C,OAAO,CAAE,GAAG,CAAC,IAAI,AACrB,CAAC,AAED,qBAAO,CAAC,gBAAE,CAAC,AACP,MAAM,CAAE,GAAG,CAAC,GAAG,AACnB,CAAC,AAED,YAAY,4BAAC,CAAC,AACV,YAAY,CAAE,IAAI,CAClB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,AACvB,CAAC,AAED,MAAM,4BAAC,CAAC,AACJ,WAAW,CAAE,IAAI,AACrB,CAAC,AAEO,gBAAgB,AAAE,CAAC,AACvB,UAAU,CAAE,MAAM,CAClB,gBAAgB,CAAE,OAAO,CACzB,KAAK,CAAE,KAAK,CACZ,WAAW,CAAE,GAAG,CAChB,WAAW,CAAE,MAAM,CACnB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,CACX,SAAS,CAAE,IAAI,CACf,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,OAAO,AACnB,CAAC,AAEO,gBAAgB,AAAE,CAAC,AACvB,UAAU,CAAE,MAAM,CAClB,gBAAgB,CAAE,OAAO,CACzB,KAAK,CAAE,KAAK,CACZ,WAAW,CAAE,GAAG,CAChB,WAAW,CAAE,MAAM,CACnB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,CACX,SAAS,CAAE,IAAI,CACf,MAAM,CAAE,OAAO,AACnB,CAAC,AAEO,eAAe,AAAE,CAAC,AACtB,SAAS,CAAE,KAAK,AACpB,CAAC,AAEO,uBAAuB,AAAE,CAAC,AAC9B,WAAW,CAAE,WAAW,CAAC,CAAC,UAAU,CACpC,UAAU,CAAE,KAAK,CACjB,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,GAAG,CAAC,IAAI,CAAC,UAAU,AAChC,CAAC"
}